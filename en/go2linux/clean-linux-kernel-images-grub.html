<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- SEO includes -->
        
<link href="/en/atom.xml" rel="alternate" title="Guillermo Garron" type="application/atom+xml" />


        <link rel="canonical" href="http://www.garron.me/en/go2linux/clean-linux-kernel-images-grub.html" />
        
<meta name="robots" content="noopd, noydir" />


<meta name="description" content="How to get rid of unused kernel images in Ubuntu, and clean up your grub menu" />

        <!-- End SEO includes -->
        <title>Clean up your grub menu from the kernels you do not use</title>
        <!-- <link rel="stylesheet" href="/foundation/css/foundation.css" /> -->
        <link rel="stylesheet" href="//cdn.jsdelivr.net/foundation/5.5.1/css/foundation.min.css" />
        <link rel="stylesheet" href="/foundation/css/app.css">
        <link href='http://fonts.googleapis.com/css?family=Josefin+Slab|Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/webfonts/ss-social-circle.css" type="text/css">
        <!-- <link href="/bootstrap/css/magnific-popup.css" rel="stylesheet"> -->
        <link href="//cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/magnific-popup.css" rel="stylesheet">
        <!-- Twitter cards -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@ggarron">
        <meta name="twitter:creator" content="@ggarron">
        <meta name="twitter:title" content="Clean up your grub menu from the kernels you do not use">
        <meta name="twitter:description" content="How to get rid of unused kernel images in Ubuntu, and clean up your grub menu">
        <!-- End Twitter Cards -->
        <!-- FB property -->
        <meta property="fb:admins" content="613797474" />
        <!-- End FB Property -->
        <!-- <script src="/foundation/js/vendor/modernizr.js"></script> -->
        <script src="//cdn.jsdelivr.net/foundation/5.5.1/js/vendor/modernizr.js"></script>
    </head>
    <body>
        
        
        <div class="row">
    <div class="contain-to-grid sticky"> 
        <nav class="top-bar" data-topbar role="navigation" data-options="sticky_on: large">
            <ul class="title-area">
                <li class="name">
                    <h1><a href="/en/">Home</a></h1>
                </li>
                <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
            </ul>
            <section class="top-bar-section">
                <ul class="left">
                    <li><a href="/en/linux/">Linux</a></li>
                    <li><a href="/en/mac/">Mac</a></li>
                    <li><a href="/en/bits/">Tips</a></li>
                    <li><a href="/en/tech/">Tech</a></li>
                    <li><a href="/en/articles/">Articles</a></li>
                    <li><a href="/en/blog/">Blog</a></li>
                    <li><a href="/en/food/">Food</a></li>
                    <li><a href="/en/pictures/">Photos</a></li>
                    <li><a href="/en/projects/">Projects</a></li>
                    <li><a href="/en/web-design/">Web Designg</a></li>
                </ul>
            </section>
        </nav> 
    </div>
</div>
<div class="row">
    <div class="large-12 columns">
        <hr>
        <p>Get updates via: <a href="/en/atom.xml" class="ss-icon ss-social-circle">rss</a> | <a href="http://twitter.com/ggarron" class="ss-icon ss-social-circle">twitter</a> | <a href="http://feedburner.google.com/fb/a/mailverify?uri=GuillermoGarronMainSite&amp;loc=en_US" class="ss-icon ss-social-circle">email</a> | <a href="https://plus.google.com/u/0/115745027821234071812" class="ss-icon ss-social-circle">google+</a></p>
        <ul class="breadcrumbs">
            
            <li><a href="/index.html">Geeking</a>
            <li class="divider">&gt;</li>
            
            <li><a href="/en/index.html">Tech Blog</a>
            <li class="divider">&gt;</li>
            
            <li><a href="/en/go2linux/index.html">Go2Linux</a>
            <li class="divider">&gt;</li>
            
            <li class="active">Clean up your grub menu from the kernels you do not use</li>
        </ul>
    </div>
</div>
<div class="row">
    <div class="small-12 large-9 large-centered medium-9 medium-centered columns">
        <h3><a href="/en/go2linux/clean-linux-kernel-images-grub.html">Clean up your grub menu from the kernels you do not use</a></h3>
<h6>Written by <a href="/en/about.html">Guillermo Garron</a> .</h6>
<h6>Date: 2007-10-11 10:36:30 -0400</h6>

<hr>
<p>For Distros with lots of Kernel upgrades Like Ubuntu Gutsy now that it is still in Beta, it is annoying to start every day your PC and see that your grub list keep growing and growing.</p>

<p>Clean this unused kernel images is not only good because of a cleaner grub menu, but also to gain some disk space, as all those kernel images uses a lot of space in your disk.</p>

<p>I will show you do this under Ubuntu, but should also work for other distros just taking care of the names of their kernel images, and also its package managers.</p>

<p><strong>If you remove the kernel you are using, you will broke your Linux, if you remove all your kernel images, you will surely broke your Linux, so use this with care!</strong></p>

<p><strong>1. Determine which Kernel you are using</strong></p>

<p>Just run:</p>

<pre><code>uname -r
</code></pre>

<p>and write down the result, in my case this was my output:</p>

<pre><code>$ uname -r
2.6.22-14-generic
</code></pre>

<p><strong>2. Look for all installed kernel images</strong></p>

<p>Go to /boot/ and list its contents.</p>

<pre><code>cd /boot ls vmlinuz*
</code></pre>

<p>Take note of all versions you have installed This was my output:</p>

<pre><code>$ ls vmlinuz*
vmlinuz-2.6.20-16-generic
vmlinuz-2.6.22-11-generic
vmlinuz-2.6.22-12-generic
vmlinuz-2.6.22-13-generic
vmlinuz-2.6.22-14-generic
</code></pre>

<p><strong>3. Remove the kernels you want</strong></p>

<p>As I told you before, take care with this step.</p>

<p><strong>Potential risk of breaking your Linux if you erase the wrong kernel</strong></p>

<p>Run:</p>

<pre><code>sudo apt-get remove linux-image-[version]-generic linux-image-[version]-generic
</code></pre>

<p>For all the versions you may want to erase, keep at least two or three kernel images, the one you are using and one or two more. This was my output:</p>

<pre><code>$ sudo apt-get remove linux-image-2.6.22-11-generic linux-image-2.6.22-12-generic linux-image-2.6.20-16-generic
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages will be REMOVED:
  linux-image-2.6.20-16-generic linux-image-2.6.22-11-generic linux-image-2.6.22-12-generic linux-restricted-modules-2.6.20-16-generic
  linux-restricted-modules-2.6.22-11-generic linux-restricted-modules-2.6.22-12-generic linux-ubuntu-modules-2.6.22-11-generic linux-ubuntu-modules-2.6.22-12-generic
0 upgraded, 0 newly installed, 8 to remove and 0 not upgraded.
Need to get 0B of archives.
After unpacking 346MB disk space will be freed.
Do you want to continue [Y/n]? y
(Reading database ... 110373 files and directories currently installed.)
Removing linux-restricted-modules-2.6.20-16-generic ...
Removing linux-image-2.6.20-16-generic ...
Running postrm hook script /sbin/update-grub.
Searching for GRUB installation directory ... found: /boot/grub
Searching for default file ... found: /boot/grub/default
Testing for an existing GRUB menu.lst file ... found: /boot/grub/menu.lst
Searching for splash image ... none found, skipping ...
Found kernel: /boot/vmlinuz-2.6.22-14-generic
Found kernel: /boot/vmlinuz-2.6.22-13-generic
Found kernel: /boot/vmlinuz-2.6.22-12-generic
Found kernel: /boot/vmlinuz-2.6.22-11-generic
Found kernel: /boot/memtest86+.bin
Updating /boot/grub/menu.lst ... done

Removing linux-restricted-modules-2.6.22-11-generic ...
Removing linux-ubuntu-modules-2.6.22-11-generic ...
update-initramfs: Generating /boot/initrd.img-2.6.22-11-generic
find: /lib/firmware/2.6.22-11-generic: No such file or directory
find: /lib/firmware/2.6.22-11-generic: No such file or directory
find: /lib/firmware/2.6.22-11-generic: No such file or directory
find: /lib/firmware/2.6.22-11-generic: No such file or directory
find: /lib/firmware/2.6.22-11-generic: No such file or directory
find: /lib/firmware/2.6.22-11-generic: No such file or directory
Removing linux-image-2.6.22-11-generic ...
Running postrm hook script /sbin/update-grub.
Searching for GRUB installation directory ... found: /boot/grub
Searching for default file ... found: /boot/grub/default
Testing for an existing GRUB menu.lst file ... found: /boot/grub/menu.lst
Searching for splash image ... none found, skipping ...
Found kernel: /boot/vmlinuz-2.6.22-14-generic
Found kernel: /boot/vmlinuz-2.6.22-13-generic
Found kernel: /boot/vmlinuz-2.6.22-12-generic
Found kernel: /boot/memtest86+.bin
Updating /boot/grub/menu.lst ... done

Removing linux-ubuntu-modules-2.6.22-12-generic ...
update-initramfs: Generating /boot/initrd.img-2.6.22-12-generic
Removing linux-restricted-modules-2.6.22-12-generic ...
Removing linux-image-2.6.22-12-generic ...
Running postrm hook script /sbin/update-grub.
Searching for GRUB installation directory ... found: /boot/grub
Searching for default file ... found: /boot/grub/default
Testing for an existing GRUB menu.lst file ... found: /boot/grub/menu.lst
Searching for splash image ... none found, skipping ...
Found kernel: /boot/vmlinuz-2.6.22-14-generic
Found kernel: /boot/vmlinuz-2.6.22-13-generic
Found kernel: /boot/memtest86+.bin
Updating /boot/grub/menu.lst ... done
</code></pre>

<p>As you may see apt-get takes care of the menu.lst file also, anyway you may run:</p>

<pre><code>sudo update-grub
</code></pre>

<p>In case your menu.lst file was not automatically cleaned.</p>

<p>I am sure there should be a better way to do it, I am thinking in some line that can automatically parse all the content of /boot/ and remove the result of uname -r command and then perform the clean automatically, maybe with awk, and regular expressions, but I am not good in that field</p>

<hr>
<a href="http://www.garron.me/en/go2linux/clean-linux-kernel-images-grub.html">permalink</a>
<hr>
<p>If you enjoyed the article, please share it</a>
<p><a class="ss-icon ss-social-circle" href="http://twitter.com/intent/tweet?url=http://www.garron.me/en/go2linux/clean-linux-kernel-images-grub.html&text=Clean up your grub menu from the kernels you do not use&via=ggarron">twitter</a> | <a class="ss-icon ss-social-circle" href="http://facebook.com/sharer.php?u=http://www.garron.me/en/go2linux/clean-linux-kernel-images-grub.html">facebook</a> | <a class="ss-icon ss-social-circle" href="https://plus.google.com/share?url=http%3A%2F%2Fwww.garron.me/en/go2linux/clean-linux-kernel-images-grub.html">google+</a> | <a class="ss-icon ss-social-circle" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.garron.me/en/go2linux/clean-linux-kernel-images-grub.html">linkedin</a> | <a href="mailto:?Subject=Clean up your grub menu from the kernels you do not use&Body=http://www.garron.me/en/go2linux/clean-linux-kernel-images-grub.html" class="ss-icon ss-social-circle">email</a> | <a href="http://reddit.com/submit?url=http://www.garron.me/en/go2linux/clean-linux-kernel-images-grub.html&title=Clean up your grub menu from the kernels you do not use" class="ss-icon ss-social-circle">reddit</a></p>

<hr>
<!-- <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'garronblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->


    </div>
</div>
      
        <!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- <script src="/foundation/js/vendor/jquery.js"></script> -->
        <!-- <script src="/foundation/js/foundation.min.js"></script> -->
        <script src="//cdn.jsdelivr.net/foundation/5.5.1/js/foundation.min.js"></script>
        <!-- <script src="/foundation/js/rainbow.min.js"></script> -->
        <script src="//cdn.jsdelivr.net/rainbow/1.1.9/rainbow.min.js"></script>
        <!-- <script src="/bootstrap/js/magnific-popup.js"></script> -->
        <script src="//cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/jquery.magnific-popup.min.js"></script>
        <!-- To start magnific popup -->
        <script src="/bootstrap/js/custom.js"></script>
        <script>
          $(document).foundation();
        </script>
        <!-- Analytics -->
        <!-- <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1514170-11']);
  _gaq.push(['_setDomainName', 'www.garron.me']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>    -->
        <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.go2linux.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src='http://d2lx14ao1t3d4g.cloudfront.net/piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.go2linux.com/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->



        <!-- end analytics -->
    </body>
</html>
