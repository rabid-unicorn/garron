<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- SEO includes -->
        
<link href="/en/atom.xml" rel="alternate" title="Guillermo Garron" type="application/atom+xml" />


        <link rel="canonical" href="http://www.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html" />
        
<meta name="robots" content="noodp, noydir" />


<meta name="description" content="Any static site, can now be hosted in a CDN network, you can do it in Amazon S3, and also with Cloud Files from RackSpace, here you will see how to do the latter" />

        <!-- End SEO includes -->
        <title>Host your static site on Cloud Files, the CDN network from RackSpace</title>
        <!-- <link rel="stylesheet" href="/foundation/css/foundation.css" /> -->
        <link rel="stylesheet" href="//cdn.jsdelivr.net/foundation/5.5.1/css/foundation.min.css" />
        <link rel="stylesheet" href="/foundation/css/app.css">
        <link href='http://fonts.googleapis.com/css?family=Josefin+Slab|Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/webfonts/ss-social-circle.css" type="text/css">
        <!-- <link href="/bootstrap/css/magnific-popup.css" rel="stylesheet"> -->
        <link href="//cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/magnific-popup.css" rel="stylesheet">
        <!-- Twitter cards -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@ggarron">
        <meta name="twitter:creator" content="@ggarron">
        <meta name="twitter:title" content="Host your static site on Cloud Files, the CDN network from RackSpace">
        <meta name="twitter:description" content="Having a static site gives you a lot of flexibility, and one of the good things is that you can host your site in almost any possible hosting company and using almost any technology available: Here we will see how to host a static site on Cloud Files, which is the CDN network of RackSpace">
        <!-- End Twitter Cards -->
        <!-- FB property -->
        <meta property="fb:admins" content="613797474" />
        <!-- End FB Property -->
        <!-- <script src="/foundation/js/vendor/modernizr.js"></script> -->
        <script src="//cdn.jsdelivr.net/foundation/5.5.1/js/vendor/modernizr.js"></script>
    </head>
    <body>
        
        
        <div class="row">
    <div class="contain-to-grid sticky"> 
        <nav class="top-bar" data-topbar role="navigation" data-options="sticky_on: large">
            <ul class="title-area">
                <li class="name">
                    <h1><a href="/en/">Home</a></h1>
                </li>
                <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
            </ul>
            <section class="top-bar-section">
                <ul class="left">
                    <li><a href="/en/linux/">Linux</a></li>
                    <li><a href="/en/mac/">Mac</a></li>
                    <li><a href="/en/bits/">Tips</a></li>
                    <li><a href="/en/tech/">Tech</a></li>
                    <li><a href="/en/articles/">Articles</a></li>
                    <li><a href="/en/blog/">Blog</a></li>
                    <li><a href="/en/food/">Food</a></li>
                    <li><a href="/en/pictures/">Photos</a></li>
                    <li><a href="/en/projects/">Projects</a></li>
                    <li><a href="/en/web-design/">Web Designg</a></li>
                </ul>
            </section>
        </nav> 
    </div>
</div>
<div class="row">
    <div class="large-12 columns">
        <hr>
        <p>Get updates via: <a href="/en/atom.xml" class="ss-icon ss-social-circle">rss</a> | <a href="http://twitter.com/ggarron" class="ss-icon ss-social-circle">twitter</a> | <a href="http://feedburner.google.com/fb/a/mailverify?uri=GuillermoGarronMainSite&amp;loc=en_US" class="ss-icon ss-social-circle">email</a> | <a href="https://plus.google.com/u/0/115745027821234071812" class="ss-icon ss-social-circle">google+</a></p>
        <ul class="breadcrumbs">
            
            <li><a href="/index.html">Geeking</a>
            <li class="divider">&gt;</li>
            
            <li><a href="/en/index.html">Tech Blog</a>
            <li class="divider">&gt;</li>
            
            <li><a href="/en/blog/index.html">Personal</a>
            <li class="divider">&gt;</li>
            
            <li class="active">Host your static site on Cloud Files, the CDN network from RackSpace</li>
        </ul>
    </div>
</div>
<div class="row">
    <div class="small-12 large-9 large-centered medium-9 medium-centered columns">
        <h3><a href="/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html">Host your static site on Cloud Files, the CDN network from RackSpace</a></h3>
<h6>Written by <a href="/en/about.html">Guillermo Garron</a> .</h6>
<h6>Date: 2012-07-10 20:45:00 -0400</h6>

<hr>
<p>The vast majority of sites on the web now a days are dynamically generated, even when most of them can be static. This is done because that way is easy to create a site. Using a CMS.</p>

<p>But, if your site is 100% static, and you do not need to create your site on the fly, dynamically, you can get the advantage of hosting it in a CDN network. Yes the complete site hosted in a CDN network, not only the images or css files, the whole site.</p>

<p>There are plenty of instructions to do that in Amazon S3, and then enable Amazon Cloudfront, to use the advantages of the CDN. I’ll show you here how to do the same using Cloud Files from Rackspace, and use Akamai CDN network to distribute your site all over the world.</p>

<p><em>Note: Rackspace uses the Akamai Network, but it seems a limited set of endpoints of it</em></p>

<p><em>Note 2: I’ll assume you already have a static site, with an index.html file that is the head of the site. I’ll also assume that you have a Rackspace account</em></p>

<p><strong>Upload your site to Cloud Files</strong></p>

<p>Rackspace Cloud Files does not let you create folders or sub-folders, you need to create <a href="http://docs.rackspace.com/files/api/v1/cf-devguide/content/Pseudo-Hierarchical_Folders_Directories-d1e1580.html">Pseudo-Hierarchical Folders/Directories</a>. That is not easy, but you can use <a href="http://cyberduck.ch/">Cyberduck</a>. Cyberduck will take care of “sub-folders” for you. All you have to do, is drag-n-drop the files.</p>

<p>You now have all your files uploaded, and with the correct structure.</p>

<p><strong>Enable the CDN for the container, where you have uploaded your static site</strong></p>

<p>Log in to <a href="https://manage.rackspacecloud.com">Rackspace manager</a>, go to Hosting-&gt;Cloud Files, select the container you want to work with, and tick the <em>Publish to CDN</em> option.</p>

<p><strong>Tell Rackspace which is your index file</strong></p>

<p>Now you have your site published to the CDN, you can access any file if you have the complete url. For instance:</p>

<pre><code>http://www.example-site.com/how-to-use-rackspace.html
</code></pre>

<p>or</p>

<pre><code>http://www.example-site.com/images/picture1.jpg
</code></pre>

<p>But what happens when you try to access: <code>http://www.example-site.com/</code>, you will get a 404 “file not found” message, you need to specify which is the index file for your site’s main folder and sub-folders.</p>

<p>Something like <em>Index</em> in Nginx or, DirectoryIndex in Apache.</p>

<p>To do that, you need to send a POST message to your <em>Storage-Url</em>, with the header <em>X-Container-Meta-Web-Index: index.html</em> if your index page is <em>index.html</em> or any other you would prefer.</p>

<p>For you to be able to send this message, and for it to be accepted, you first need to authenticate yourself. For the sake of clarity, let start with the complete example of the POST message you need to send, the complete message is (using curl):</p>

<pre><code>curl -X POST -H "X-Container-Meta-Web-Index: index.html" -H "X-Auth-Token: aaaaaaaa-0000-0000-0000-aaaaaaaa" https://storage100.dcw1.clouddrive.com/v1/MossoCloudFS_1234567a-123c-12d1-7cad-a09878abcde3/your_container/ -v
</code></pre>

<p>As you can see, you need something to put in <em>X-Auth-Token</em> field, to get that value you have issue this other command in your Mac or Linux terminal:</p>

<pre><code>curl -H "X-Auth-User: your-user-name" -H "X-Auth-Key: 0123456789abcdef01234567899d" https://auth.api.rackspacecloud.com/v1.0/ -v
</code></pre>

<p>Where:</p>

<ul>
  <li>X-Auth-User: Is the username you use to log into your Rackspace account</li>
  <li>X-Auth-Key: Is your API key.</li>
</ul>

<p>To get your API key, go to: <em>Your account -&gt; API Access</em> and click <em>Show Key</em> button.</p>

<p>Once you enter that command in your terminal, you will get an answer like this:</p>

<pre><code>&lt; HTTP/1.1 204 No Content
&lt; Server: Apache/2.2.3 (Red Hat)
&lt; vary: X-Auth-Token,X-Auth-Key,X-Storage-User,X-Storage-Pass
&lt; X-Storage-Url: https://storage200.dfw1.clouddrive.com/v1/MossoCloudFS_0002-abcd-0993344-adfe
&lt; Cache-Control: s-maxage=59568
&lt; Content-Type: text/xml
&lt; Date: Tue, 10 Jul 2012 10:29:21 GMT
&lt; X-Auth-Token: aaaaaaaa-0000-0000-0000-aaaaaaaa
&lt; X-Server-Management-Url: https://servers.api.rackspacecloud.com/v1.0/000111
&lt; X-Storage-Token: aaaaaaaa-0000-0000-0000-bbbbbb
&lt; Connection: Keep-Alive
&lt; X-CDN-Management-Url: https://cdn1.clouddrive.com/v1/MossoCloudFS_0000000-1111-2222-3333-9999999
&lt; Content-Length: 0
</code></pre>

<p>From there you can get the <em>X-Auth-Token</em> value you need to use with this command:</p>

<pre><code>curl -X POST -H "X-Container-Meta-Web-Index: index.html" -H "X-Auth-Token: aaaaaaaa-0000-0000-0000-aaaaaaaa" https://storage100.dcw1.clouddrive.com/v1/MossoCloudFS_1234567a-123c-12d1-7cad-a09878abcde3/your_container/ -v
</code></pre>

<p>With this, you have have finished the configuration, you can now create a CNAME in your DNS to point your www.example-site.com to point to your CDN url. Do not forget to set a proper TTL for your files, you can do that in the Cloud Files section in the Rackspace control panel. The default is 72 hours.</p>


<hr>
<a href="http://www.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html">permalink</a>
<hr>
<p>If you enjoyed the article, please share it</a>
<p><a class="ss-icon ss-social-circle" href="http://twitter.com/intent/tweet?url=http://www.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html&text=Host your static site on Cloud Files, the CDN network from RackSpace&via=ggarron">twitter</a> | <a class="ss-icon ss-social-circle" href="http://facebook.com/sharer.php?u=http://www.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html">facebook</a> | <a class="ss-icon ss-social-circle" href="https://plus.google.com/share?url=http%3A%2F%2Fwww.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html">google+</a> | <a class="ss-icon ss-social-circle" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html">linkedin</a> | <a href="mailto:?Subject=Host your static site on Cloud Files, the CDN network from RackSpace&Body=http://www.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html" class="ss-icon ss-social-circle">email</a> | <a href="http://reddit.com/submit?url=http://www.garron.me/en/blog/host-static-site-cloud-files-rackspace-akamai-cdn.html&title=Host your static site on Cloud Files, the CDN network from RackSpace" class="ss-icon ss-social-circle">reddit</a></p>

<hr>
<!-- <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'garronblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->


    </div>
</div>
      
        <!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- <script src="/foundation/js/vendor/jquery.js"></script> -->
        <!-- <script src="/foundation/js/foundation.min.js"></script> -->
        <script src="//cdn.jsdelivr.net/foundation/5.5.1/js/foundation.min.js"></script>
        <!-- <script src="/foundation/js/rainbow.min.js"></script> -->
        <script src="//cdn.jsdelivr.net/rainbow/1.1.9/rainbow.min.js"></script>
        <!-- <script src="/bootstrap/js/magnific-popup.js"></script> -->
        <script src="//cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/jquery.magnific-popup.min.js"></script>
        <!-- To start magnific popup -->
        <script src="/bootstrap/js/custom.js"></script>
        <script>
          $(document).foundation();
        </script>
        <!-- Analytics -->
        <!-- <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1514170-11']);
  _gaq.push(['_setDomainName', 'www.garron.me']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>    -->
        <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.go2linux.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src='http://d2lx14ao1t3d4g.cloudfront.net/piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.go2linux.com/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->



        <!-- end analytics -->
    </body>
</html>
